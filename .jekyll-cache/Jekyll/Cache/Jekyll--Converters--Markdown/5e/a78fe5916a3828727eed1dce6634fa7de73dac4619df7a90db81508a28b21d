I"yH<p>Есть вещи, которые то и дело приходится повторять, расписывая разным людям по не менее разным поводам. Эта рекомендация по хранению паролей из их числа и чем повторяться, проще один раз расписать как можно лучше, чтобы в дальнейшем ограничиться одной ссылкой.
Расписать же я постараюсь как можно проще и понятнее, на манер инструкции.
Речь пойдет о <a href="https://ru.wikipedia.org/wiki/%D0%9C%D0%B5%D0%BD%D0%B5%D0%B4%D0%B6%D0%B5%D1%80_%D0%BF%D0%B0%D1%80%D0%BE%D0%BB%D0%B5%D0%B9">менеджерах паролей</a>.</p>

<p>Всего несколько простых шагов и вам не только не придется больше держать в голове все десять вариаций одного простого пароля и перебирать их каждый раз при попытке залогиниться, но и перестать пользоваться простыми паролями. Опять же, запоминать их не придется.</p>

<p>Итак, по пунктам.</p>

<h2 id="keepassxc">KeePassXC</h2>

<p>Программа <a href="https://keepassxc.org">KeePassXC</a> имеет за собой некоторую историю - она является форком не разрабатываемой более <a href="https://www.keepassx.org/">KeePassX</a>, которая в свою очередь была создана для работы с базами <a href="http://keepass.info/">KeePass Password Safe</a>, на тот момент не имеющей порта под Linux. С последней, как несложно догадаться, и началась вся история. Ныне все три программы доступны под Windows, Linux и macOS.
Полный список возможностей KeePassXC находится <a href="https://github.com/keepassxreboot/keepassxc/wiki">здесь</a>.</p>

<p>Заходим на сайт в раздел <a href="https://keepassxc.org/download">Download</a>, скачиваем KeePassXC в любом удобном вам виде, устанавливаем и запускаем.</p>

<p><img src="/images/2017/07/Keepass1.png" alt="" />
<em>Полагаю, у вас она будет выглядеть несколько иначе. Я любитель темных тем.</em></p>

<p>Программа встречает нас предложением создать новую базу, открыть имеющуюся или экспортировать. Выбираем <em>Create new database</em> и сохраняем базу. О том, где её лучше хранить, речь пойдет чуть дальше. Пока же достаточно просто сложить её, куда заблагорассудится.</p>

<p><img src="/images/2017/07/Keepass2.png" alt="" /></p>

<p>Тут же нам предлагают ввести мастер-пароль и это момент достаточно ответственный, так как это тот самый ключ от всех дверей и лучше, если он будет подлиннее, будет содержать буквы в разном регистре, цифры и какие-нибудь символы. Не перестарайтесь, так как вводить этот пароль для отпирания базы потребуется каждый раз.
Набрав пароль дважды, нажмите на кнопку с глазом, чтобы убедиться, что ваши пальцы не станцевали пьяную джигу и всё напечатано так, как и задумывалось.</p>

<p>Тут ведь явно не всё!</p>

<p><em>Key file</em> - это возможность открывать базу с помощью выбора ключевого файла. Файл - не пароль и его запомнить или записать на бумажку не получится, так что надежность этого способа шифрования базы уравновешивается соответствующей ненадежностью. Конечно, можно выбрать что-нибудь из системных файлов, но нет гарантии, что они не изменятся со следующим обновлением системы.</p>

<p><em>Challenge Response</em> - это вариант для владельцев ключа <a href="https://www.yubico.com/">YubiKey</a>. Вариант интересный, но мы обойдем его стороной.</p>

<p><img src="/images/2017/07/Keepass3.png" alt="" /></p>

<p>Итак, я ввел пароль, но так ли хорош он? Это можно проверить, нажав на кнопку с игральной костью - генератор паролей.</p>

<p><img src="/images/2017/07/Keepass4.png" alt="" /></p>

<p>Введя сюда свой пароль, я вижу, что он и правда так себе.
Стало быть, воспользуемся генератором. Генератор выдает как с трудом запоминаемые пароли вроде <em>“jPruyn6w5RWWVW9M”</em>, так и парольные фразы вроде <em>“swerve unicorn amusement hangnail duly shakiness”</em>. Поэтично, правда? Фраза - неплохой вариант, если вы не боитесь вордлистов, так как фразу легко выучить, но вам может надоесть вбивать несколько слов каждый раз при необходимости открыть базу.</p>

<p>Определившись с мастер-паролем (его всегда можно заменить позднее), закрываем генератор нажатием на ту же кнопку и жмём <em>Ok</em>.</p>

<p><img src="/images/2017/07/Keepass5.png" alt="" /></p>

<p>Сейчас здесь совсем пусто. Сохранимся и заглянем в настройки. Я не буду расписывать всё имеющееся, но сразу укажу на один важный пункт. Кроме него, там не так много настроек и вы не заблудитесь. Не забывайте, что если что-то не понятно, просто оставьте это как есть.</p>

<p><em>Tools &gt; Settings &gt; Browser Integration</em></p>

<p><img src="/images/2017/07/Keepass6.png" alt="" /></p>

<p>Поставьте галочку на <em>Enable KeePassHTTP server</em> и нажмите <em>Применить</em>. Это позволит вашему браузеру связываться с KeePassXC и получать необходимые пароли. Как это делается, я распишу далее.</p>

<p>Теперь создадим пароль. Вам не потребуется делать это каждый раз, так как интеграция с браузером позволяет сохранять пароли одним нажатием, но обойти стороной это окно нельзя.</p>

<p>На панели или в меню находим <em>Add new entry</em>.</p>

<p><img src="/images/2017/07/Keepass7.png" alt="" /></p>

<p>Здесь все довольно просто и вряд ли нуждается в описании.
Уточню только, что в поле URL не обязательно указывать полный адрес с http://, поле <em>Expires</em> позволяет указать срок службы пароля, а в Notes можно указать любую дополнительную информацию.
Не забывайте нажать <em>Применить</em>.</p>

<h2 id="облако">Облако</h2>

<p>Дабы уберечь драгоценные пароли от детей, пожаров и естественной смерти жесткого диска, базу данных нужно доверить облаку.
Ни одна из упомянутых инкарнаций KeePass не предоставляет встроенной облачной синхронизации, оставляя за пользователем свободу выбора. Не все менеджеры паролей работают таким образом и об альтернативных вариантах я расскажу в самом конце.</p>

<p>Подход KeePass предельно прост - кладите свою базу в синхронизируемую папку и пусть она отправляется в облако с каждым изменением. Хоть два облака сразу. Файл есть файл.</p>

<p>Как работают облачные сервисы? Если совсем просто, то вы регистрируетесь, ставите небольшую программку себе на компьютер (или несколько компьютеров и телефон), она следит за изменениями каждого файла в доверенной ей папке и автоматически отправляет всё в облако - на сервер. Изменения, произведенные вами на компьютере и отправленные в облако, будут доступны на других компьютерах или на телефоне при первом же запуске этой программы на них. Таким образом облако хранит важные файлы и делает их доступными из разных мест без особых усилий.</p>

<p>Я рекомендую воспользоваться <a href="https://ru.wikipedia.org/wiki/Mega">Mega</a>, так как все данные шифруются перед отправкой не сервер. Конечно, нельзя не обратить внимание на то предупреждение в статье на Wikipedia, но имейте в виду, что тот же популярный и вседоступный <a href="https://ru.wikipedia.org/wiki/Dropbox">Dropbox</a> не предлагает даже такого.</p>

<p><img src="/images/2017/07/Keepass8.png" alt="" /></p>

<p>Я сохранил свою базу паролей в папку Mega на своем компьютере и теперь свежая копия базы всегда лежит в облачном хранилище.</p>

<h2 id="браузер">Браузер</h2>

<p>Конечно, можно копировать пароли из KeePassXC от руки каждый раз, как вам нужно залогиниться, но вряд ли попадание паролей в буфер обмена надежнее безопасной передачи по HTTP. Что бы это ни значило, по меньшей мере, так куда удобнее.</p>

<p>Вы заходите на сайт с полями ввода логина и пароля, плагин для браузера отправляет запрос KeePass и получает логин/пароль. Вам остается только нажать <em>Enter</em>. Для отдельно взятых сайтов эту функцию можно отключить. Если же в базе существует больше одной записи с одинаковым URL, браузер предложит выбрать необходимую.</p>

<p>Для связи KeePassXC с браузером понадобится плагин:</p>
<ul>
  <li><a href="https://chrome.google.com/webstore/detail/chromeipass/ompiailgknfdndiefoaoiligalphfdae">chromeIPass</a> для Google Chrome, Chromium и всех родственных и производных, включая Opera, Vivaldi, Yandex.Browser, сотни их.</li>
  <li><a href="https://addons.mozilla.org/en-us/firefox/addon/passifox/">PassIFox</a> для Mozilla Firefox</li>
  <li><a href="https://github.com/mmichaa/passafari.safariextension/">passafari</a> для Safari</li>
</ul>

<p>Они несколько отличаются в настройке, но по сути не сильно и я рассмотрю пример с chromeIPass. Отмечу, что все три плагина работают как с KeePassXC, так и с двумя другими упомянутыми менеджерами паролей.</p>

<p>После установки плагина на панели браузера появится новая кнопка. Держите её на виду.</p>

<p><img src="/images/2017/07/Keepass9.png" alt="" /></p>

<p>Здесь не обязательно заглядывать в настройки, если не хочется. Важно только нажать <em>Connect</em> - установить связь между браузером и KeePassXC.</p>

<p><img src="/images/2017/07/Keepass10.png" alt="" /></p>

<p>Появится вот такое окошко - запрос на связь. Здесь нужно ввести любое имя для браузера (предполагается, что из может быть несколько на разных компьютерах).</p>

<p>После этого в базе появится запись с названием <em>KeePassHttp Settings</em>. Удалять её можно, но не стоит, иначе придется снова устанавливать связь.</p>

<p>Теперь я покажу, как при регистрации на сайте можно сгенерировать пароль и тут же сохранить его в базу.</p>

<p><img src="/images/2017/07/Keepass11.png" alt="" /></p>

<p>Вот обычная форма регистрации на сайте. В поле ввода пароля появилась кнопка с ключом. По нажатию на нее появляется генератор паролей со свежим паролем.</p>

<p><img src="/images/2017/07/Keepass12.png" alt="" /></p>

<p>Если вдруг ключик не появился, нажмите на кнопку chromeIPass и далее на <em>Redetect credential fields</em>. Если и так поля ввода не определятся, их можно указать самостоятельно через <em>Choose own credential fields for this page</em>.</p>

<p><img src="/images/2017/07/Keepass13.png" alt="" /></p>

<p>Сразу после того, как email или логин с паролем будут отправлены, кнопка chromeIPass замигает красным, предлагая сохранить пароль в базу по нажатию на <em>New</em>, либо в других случаях обновить имеющуюся запись.</p>

<p><img src="/images/2017/07/Keepass14.png" alt="" /></p>

<p>chromeIPass сохранил новый пароль в базе. Не забудьте сохранить саму базу!</p>

<p><img src="/images/2017/07/Keepass15.png" alt="" /></p>

<p>В следующий раз при попытке залогиниться на этом сайте будет задан такой вопрос - использовать ли автоматический ввод логина и пароля для этого сайта или нет. Поставьте галочку на <em>Remember this decision</em>, чтобы запомнить решение.</p>

<h2 id="альтернативы">Альтернативы</h2>

<p>Их много. По меньшей мере, есть оригинальный <a href="http://keepass.info/">KeePass</a> - тяжеловесный, полный функций и расширяемый при помощью плагинов. Формат базы у них, кстати, один и потому ничто не мешает перейти на него, сохранив ту же базу, или даже пользоваться разными программами работая с одной базой.</p>

<p>Есть и альтернативы для ленивых: сократите все пройденные в статье этапы до одной лишь установки плагина в браузер и регистрации - вот вам <a href="https://www.lastpass.com/ru">LastPass</a>. Ценой безопасности ваших данных, конечно.
Да, он <a href="https://habrahabr.ru/company/defconru/blog/260383/">был взломан</a>.</p>

<p>Преимущество связки KeePass, плагина и облака перед “решениями” не только в том, что это абсолютно бесплатно, но и свободно - никто не скажет, где вам хранить ваши пароли. Облако вполне можно заменить и на флешку. Не забывайте и о возможности открывать базу ключевым файлом или YubiKey.</p>

<h2 id="заключение">Заключение</h2>

<p>Нет-нет, никакой паранойи у вас нет! Но может стоило бы немножко?</p>

<p>В этой статье описано всего несколько простых шагов, которые сделают жизнь не только чуть проще, но и безопаснее. Не поленитесь пройти их хотя бы для того, чтобы поставить галочку на этом вопросе.</p>

<hr />
:ET